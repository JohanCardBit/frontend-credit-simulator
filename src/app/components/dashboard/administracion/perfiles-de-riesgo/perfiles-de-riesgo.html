<div class="riesgo-container">

  <!-- Encabezado -->
  <div class="header-riesgo">
    <h2>Perfiles de riesgo</h2>
    <label (click)="limpiarModal()" class="btn-crear" for="modalCrear">+ Crear perfil</label>
  </div>

  <!-- Contenedor de tarjetas -->
  <div class="cards-riesgo">

    @for (item of perfiles; track $index) {
    <div class="card-riesgo glass">
      <div class="card-header">
        <span class="categoria categoria-{{item.category}}">Categor√≠a {{item.category}}</span>
        <div class="acciones">
          <label (click)="verCategoria(item._id)" class="icon-btn" for="modalEditar">‚úèÔ∏è</label>
          <button (click)="eliminarPerfil(item._id)" class="icon-btn eliminar">üóëÔ∏è</button>
        </div>
      </div>

      <div class="card-body">
        <p><strong>Puntaje:</strong> {{item.maxScore}} - {{item.minScore}}</p>
        <p><strong>Tasa inter√©s:</strong> {{item.interestRate}} %</p>
        <p class="desc">
          {{item.description}}
        </p>
      </div>
    </div>
    }
  </div>
</div>


<!-- ========================= -->
<!-- MODAL CREAR PERFIL -->
<!-- ========================= -->
<input type="checkbox" id="modalCrear" class="modal-toggle" hidden>

<div class="modal">
  <label for="modalCrear" class="modal-overlay"></label>

  <div [formGroup]="perfilForm" class="modal-content glass modal-riesgo">
    <h3>Crear perfil de riesgo</h3>

    <div class="form-riesgo">

      <div class="col">
        <label>Categor√≠a</label>
        <select formControlName="category" class="form-control">
          <option value="">Seleccione...</option>
          <option value="A">A - Riesgo Bajo</option>
          <option value="B">B - Riesgo Medio</option>
          <option value="C">C - Riesgo Alto</option>
        </select>

        <label>Puntaje m√≠nimo</label>
        <input formControlName="minScore" type="number" placeholder="Ej: 600">

        <label>Puntaje m√°ximo</label>
        <input formControlName="maxScore" type="number" placeholder="Ej: 749">
      </div>

      <div class="col">
        <label>Tasa de inter√©s (%)</label>
        <input formControlName="interestRate" type="number" placeholder="Ej: 10">

        <label>Descripci√≥n</label>
        <textarea formControlName="description" rows="5" placeholder="Descripci√≥n del perfil..."></textarea>
      </div>

    </div>

    <div class="acciones-modal">
      <button (click)="crearPerfilDeRiesgo()" class="btn-guardar">Guardar</button>
      <label for="modalCrear" class="btn-cerrar">Cerrar</label>
    </div>
  </div>
</div>


<!-- ========================= -->
<!-- MODAL EDITAR PERFIL -->
<!-- ========================= -->
<input type="checkbox" id="modalEditar" class="modal-toggle" hidden>

<div class="modal">
  <label for="modalEditar" class="modal-overlay"></label>

  <div [formGroup]="perfilForm" class="modal-content glass modal-riesgo">
    <h3>Editar perfil de riesgo {{perfilForm.get('category')?.value}}</h3>

    <div class="form-riesgo">

      <div class="col">

        <label>Puntaje m√≠nimo</label>
        <input formControlName="minScore" type="number" value="750">

        <label>Puntaje m√°ximo</label>
        <input formControlName="maxScore" type="number" value="900">

          <label>Tasa de inter√©s (%)</label>
        <input formControlName="interestRate" type="number" value="5">
      </div>

      <div class="col">


        <label>Descripci√≥n</label>
        <textarea formControlName="description" rows="5">Riesgo bajo, excelente historial crediticio.</textarea>
      </div>

    </div>

    <div class="acciones-modal">
      <button (click)="actualizarPerfil()" class="btn-guardar">Guardar cambios</button>
      <label for="modalEditar" class="btn-cerrar">Cerrar</label>
    </div>
  </div>
</div>
